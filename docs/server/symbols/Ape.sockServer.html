---
layout: APE
title:  Ape.sockServer &#58;&#58; Server Documentation &#58;&#58; APE (Ajax Push Engine)
---

<div id="index">
	<div class="span3">
	<div class="well sidebar-nav">
		<a href="../index.html">Class Index</a> | <a href="../files.html">File Index</a>
		<h2>Classes</h2>
		<ul class="nav nav-list classList">
			
				<li> 									<i><a href="../symbols/global.html">global</a></i> 								</li> 								<li class="nav-header"> 									<hr/> 								</li>
			
				<li><a href="../symbols/Ape.html">Ape</a></li>
			
				<li><a href="../symbols/Ape.b64.html">Ape.b64</a></li>
			
				<li><a href="../symbols/Ape.channel.html">Ape.channel</a></li>
			
				<li><a href="../symbols/Ape.MySQL.html">Ape.MySQL</a></li>
			
				<li><a href="../symbols/Ape.pipe.html">Ape.pipe</a></li>
			
				<li><a href="../symbols/Ape.sha1.html">Ape.sha1</a></li>
			
				<li><a href="../symbols/Ape.sockClient.html">Ape.sockClient</a></li>
			
				<li><a href="../symbols/Ape.sockServer.html">Ape.sockServer</a></li>
			
				<li><a href="../symbols/Ape.subuser.html">Ape.subuser</a></li>
			
				<li><a href="../symbols/Ape.user.html">Ape.user</a></li>
			
		</ul>
	</div><!--/.well -->
</div><!--/span-->

</div>

<div class="span9">
	<div class="row-fluid">
		<!-- ============================== class title ============================ -->
		<div class="span6">
			<h1 class="section classTitle">server 
			Class Ape.sockServer</h1>
		</div>
		<div class="span3" align="center">
			<img src="/assets//img/promotejsh.gif" width="150px" height="148px"/>
		</div>
	</div>
	<div class="row-fluid">
		
		<ul class="nav nav-tabs nav-tabs-pannel">
			<li class="" id="summary">
				<a href="#class_summary" data-toggle="tab">Class summary</a>
			</li>
			
				<li class="" id="constructor">
					<a href="#contructor_details" data-toggle="tab">Constructor</a>
				</li>
			
			
			
			
				<li class="active" id="events">
					<a href="#events_details" data-toggle="tab">Events</a>
				</li>
			
		</ul>
		<div class="tab-content">
			<!-- ============================== class summary ========================== -->
			<div class="tab-pane  jsdoc-pane" id="class_summary">
				<a name="class_summary"><h2><span class="variableName">Summary</span></h2></a>
				
				
					<dl class="detailList">
						<dt class="labelHeading">Extends:</dt>
						<div class="dline">
							<dd><a href="../symbols/Ape.html#static_apesocket">Ape.apesocket</a>
							</dd>
						<div class="dline">
					</dl>
				
				
					<div class="description">
						sockServer Object (TCP connection server)
					</div>
				
				
					<dl class="detailList">
						<dt class="labelHeading">File</dt>
						<div class="dline">
							<dd>&lt;./src/Ape_Server/modules/libape-spidermonkey.c&gt;</dd>
						</div>
					</dl>
				
			</div>
			<!-- ============================== constructor details ==================== -->
			<div class="tab-pane  jsdoc-pane" id="contructor_details">
				
					<div class="details"><a name="constructor"><h2><span class="variableName">sockServer</span> Class Detail</h2></a>
						<div class="storageClass">
							
							<b>Ape.sockServer</b>
							
								(port, ip, options)
							
						</div>
						
							<div class="description">
								Ape.sockServer is a class constructor.
<p>SockServer is used to create a socket server that can accept client sockets,</p>
							</div>
						
						
							<dl class="detailList">
								<dt class="labelHeading">File:</dt>
								<div class="dline">
										<dd>&lt;./src/Ape_Server/modules/libape-spidermonkey.c&gt;</dd>
									</div>
								</dl>
							
							
						
							<dl class="detailList">
								<dt class="labelHeading">Parameters:</dt>
								<div class="dline">
									
										<dt>
											<span class="parameterType">{integer|string} </span>
											<span class="variableName">port</span>
											<span class="parameterInfo">
												
												
											</span>
										</dt>
										<dd><span class="descriptionSummary"></span></dd>
									
										<dt>
											<span class="parameterType">{string} </span>
											<span class="variableName">ip</span>
											<span class="parameterInfo">
												
												
											</span>
										</dt>
										<dd><span class="descriptionSummary">The ip address to bind the server</span></dd>
									
										<dt>
											<span class="parameterType">{object} </span>
											<span class="variableName">options</span>
											<span class="parameterInfo">
												
													<i>Optional</i>
												
												
											</span>
										</dt>
										<dd><span class="descriptionSummary"></span></dd>
									
										<dt>
											<span class="parameterType">{boolean} </span>
											<span class="variableName">options.flushlf</span>
											<span class="parameterInfo">
												
													<i>Optional</i>
												
												
													<i>Default: false</i>
												
											</span>
										</dt>
										<dd><span class="descriptionSummary">If true onRead is called only when a "\n" is received (data is split around it)</span></dd>
									
								</div>
							</dl>
						
						
							<dl class="detailList">
								<dt class="labelHeading">Returns:</dt>
								<div class="dline">
									
										<dd><span class="parameterType">{<a href="../symbols/Ape.sockServer.html">Ape.sockServer</a>} </span>
											<span class="descriptionSummary"></span>
										</dd>
									
								</div>
							</dl>
						
						
						
						
						
						
							<dl class="detailList">
								<dt class="labelHeading">Examples</dt>
								
									<dd>
										<pre class="code prettyprint linenums lang-javascript">//Instantiating a socket server that listens to port 80
var socket = new Ape.sockServer('80', '0.0.0.0', {flushlf: true} );</pre>
									</dd>
								
									<dd>
										<pre class="code prettyprint linenums lang-javascript">var socket = new Ape.sockServer('80', '0.0.0.0', {flushlf: true});
socket.onAccept = function(client) {
	Ape.log('New client !');
	client.write('Hello world\n');
}
socket.onRead = function(client, data) {
	Ape.log('Received data:' + data);
	if(data == 'bye') {
		client.close();
	}
}</pre>
									</dd>
								
							</dl>
						
						
							<dl class="detailList">
								<dt class="labelHeading">See:</dt>
								<div class="dline">
									
										<dd><a href="../symbols/Ape.sockClient.html">Ape.sockClient</a>
											
										</dd>
									
										<dd><a href="../symbols/Ape.sockServer.html">Ape.sockServer</a>
											
										</dd>
									
										<dd><a href="../symbols/Ape.sockClient.html">Ape.sockClient</a>
											
										</dd>
									
								</div>
							</dl>
						
						<div class="wikilink"><a href="http://www.ape-project.org/wiki/index.php?page_server:Ape.sockServer.sockServer" target="_blank"><img src="/assets/img/wikiape.png"/>Go to the wiki for this item</a></div>
					</div>
				
			</div>
			<!-- ============================== properties ========================================= -->
			<div class="tab-pane  jsdoc-pane" id="property_details">
				
			</div>
			<!-- ============================== methods ========================================== -->
			<div class="tab-pane  jsdoc-pane" id="methods_details">
				
			</div>
			<!-- ============================== events summary ======================== -->
			<div class="tab-pane active jsdoc-pane" id="events_details">
				
					
					
						<ul class="nav nav-tabs nav-tabs-pannel">
							<li class="active" id="events_summary_li" class="nested">
								<a href="#events_summary" data-toggle="tab">Event summary</a>
							</li>
							
								<li class="nested" id="static_event_onAccept_li">
									<a href="../symbols/Ape.sockServer.html#static_event_onAccept" data-toggle="tab">onAccept</a>
								</li>
							
								<li class="nested" id="static_event_onConnect_li">
									<a href="../symbols/Ape.sockServer.html#static_event_onConnect" data-toggle="tab">onConnect</a>
								</li>
							
								<li class="nested" id="static_event_onDisconnect_li">
									<a href="../symbols/Ape.sockServer.html#static_event_onDisconnect" data-toggle="tab">onDisconnect</a>
								</li>
							
								<li class="nested" id="static_event_onRead_li">
									<a href="../symbols/Ape.sockServer.html#static_event_onRead" data-toggle="tab">onRead</a>
								</li>
							
						</ul>
					
					<div class="tab-content">
						<!-- ============================== events summary ======================== -->
						<div class="tab-pane active active jsdoc-pane" id="events_summary">
							<a name="events_summary"><h2><span class="variableName">Summary</span></h2></a>
							
								<dl class="detailList">
									<dt class="labelHeading">Own</dt>
								</dl>
								<table class="summaryTable">
									<thead>
										<tr>
											<th>Attributes</th>
											<th>Name</th>
											<th>Description</th>
										</tr>
									</thead>
									<tbody>
										
											<tr>
												<td class="attributes">
													<span class="storageClass">&lt;static&gt; &nbsp;
													</span>
												</td>
												<td>
													<span class="storageClass">
														
															Ape.sockServer.
														
													</span>
													<span class="variableName"><a href="../symbols/Ape.sockServer.html#static_event_onAccept" onClick="handleTabLinks('#static_event_onAccept'); return false;">onAccept</a></span>
													(socketClient)
												</td>
												<td>
													<span class="descriptionSummary">Trigger a event if a client is connected to this socketServer.</span>
												</td>
											</tr>
										
											<tr>
												<td class="attributes">
													<span class="storageClass">&lt;static&gt; &nbsp;
													</span>
												</td>
												<td>
													<span class="storageClass">
														
															Ape.sockServer.
														
													</span>
													<span class="variableName"><a href="../symbols/Ape.sockServer.html#static_event_onConnect" onClick="handleTabLinks('#static_event_onConnect'); return false;">onConnect</a></span>
													()
												</td>
												<td>
													<span class="descriptionSummary">Trigger a event if a connection has been established.</span>
												</td>
											</tr>
										
											<tr>
												<td class="attributes">
													<span class="storageClass">&lt;static&gt; &nbsp;
													</span>
												</td>
												<td>
													<span class="storageClass">
														
															Ape.sockServer.
														
													</span>
													<span class="variableName"><a href="../symbols/Ape.sockServer.html#static_event_onDisconnect" onClick="handleTabLinks('#static_event_onDisconnect'); return false;">onDisconnect</a></span>
													(client)
												</td>
												<td>
													<span class="descriptionSummary">Trigger a event if the client is disconnected.</span>
												</td>
											</tr>
										
											<tr>
												<td class="attributes">
													<span class="storageClass">&lt;static&gt; &nbsp;
													</span>
												</td>
												<td>
													<span class="storageClass">
														
															Ape.sockServer.
														
													</span>
													<span class="variableName"><a href="../symbols/Ape.sockServer.html#static_event_onRead" onClick="handleTabLinks('#static_event_onRead'); return false;">onRead</a></span>
													(client, data)
												</td>
												<td>
													<span class="descriptionSummary">Trigger a event if something is read on a serverSocket.</span>
												</td>
											</tr>
										
									</tbody>
								</table>
							
							
								<dl class="inheritsList">
									<dt class="labelHeading">Inherrited</dt>
									<div class="dline">
									
									</div>
								</dl>
							
						</div>
						<!-- ============================== event details ========================= -->
						
							
								<div class="tab-pane jsdoc-pane" id="static_event_onAccept">
									<h2>
										<span class="storageClass">
											&lt;static&gt; 
										</span>
										
											<span class="parameterType">{void}</span>
										
										
											<span class="parameterType">Ape.sockServer.</span>
										
										<a name="static_event_onAccept">
											<span class="variableName">onAccept</span>
											(socketClient)
										</a>
									</h2>
									
										<div class="description">
											Trigger a event if a client is connected to this socketServer.
										</div>
									
									
									
									
										<dl class="detailList">
											<dt class="labelHeading">Parameters:</dt>
											<div class="dline">
												
													<dd>
														<span class="parameterType">{sockClient} </span>
														<span class="variableName">socketClient</span>
														<span class="parameterInfo">
															
																<i>Optional</i>
															
															
														</span>
														<span class="descriptionSummary"></span>
													</dd>
												
											</div>
										</dl>
									
									
										<dl class="detailList">
											<dt class="labelHeading">Returns:</dt>
											<div class="dline">
												
													<dd>
														<span class="parameterType">{void} </span>
														<span class="descriptionSummary"></span>
													</dd>
												
											</div>
										</dl>
									
									
									
									
									
									
										<dl class="detailList">
											<dt class="labelHeading">Example</dt>
											
												<dd>
													<pre class="code prettyprint linenums lang-javascript">socket.onAccept = function(client) {
	Ape.log("New server !");
	client.write("Hello world\n");
}</pre>
												</dd>
											
										</dl>
									
									
										<dl class="detailList">
											<dt class="labelHeading">See:</dt>
											<div class="dline">
												
													<dd><a href="../symbols/Ape.sockClient.html">Ape.sockClient</a>
														
													</dd>
												
													<dd><a href="../symbols/Ape.sockServer.html">Ape.sockServer</a>
														
													</dd>
												
													<dd>Ape.sockClient.connect
														
													</dd>
												
													<dd>Ape.sockServer.connect
														
													</dd>
												
											</div>
										</dl>
									
									<hr />
									<div class="wikilink"><a href="http://www.ape-project.org/wiki/index.php?page_server:Ape.sockServer.onAccept" target="_blank"><img src="/assets/img/wikiape.png"/>Go to the wiki for this item</a></div>
								</div>
							
								<div class="tab-pane jsdoc-pane" id="static_event_onConnect">
									<h2>
										<span class="storageClass">
											&lt;static&gt; 
										</span>
										
											<span class="parameterType">{void}</span>
										
										
											<span class="parameterType">Ape.sockServer.</span>
										
										<a name="static_event_onConnect">
											<span class="variableName">onConnect</span>
											()
										</a>
									</h2>
									
										<div class="description">
											Trigger a event if a connection has been established.
										</div>
									
									
									
									
									
										<dl class="detailList">
											<dt class="labelHeading">Returns:</dt>
											<div class="dline">
												
													<dd>
														<span class="parameterType">{void} </span>
														<span class="descriptionSummary"></span>
													</dd>
												
											</div>
										</dl>
									
									
									
									
									
									
										<dl class="detailList">
											<dt class="labelHeading">Example</dt>
											
												<dd>
													<pre class="code prettyprint linenums lang-javascript">socket.onConnect = function() {
	Ape.log("We are connected !");
	this.write("Hello\n");
}</pre>
												</dd>
											
										</dl>
									
									
										<dl class="detailList">
											<dt class="labelHeading">See:</dt>
											<div class="dline">
												
													<dd><a href="../symbols/Ape.sockClient.html">Ape.sockClient</a>
														
													</dd>
												
													<dd><a href="../symbols/Ape.sockServer.html">Ape.sockServer</a>
														
													</dd>
												
											</div>
										</dl>
									
									<hr />
									<div class="wikilink"><a href="http://www.ape-project.org/wiki/index.php?page_server:Ape.sockServer.onConnect" target="_blank"><img src="/assets/img/wikiape.png"/>Go to the wiki for this item</a></div>
								</div>
							
								<div class="tab-pane jsdoc-pane" id="static_event_onDisconnect">
									<h2>
										<span class="storageClass">
											&lt;static&gt; 
										</span>
										
											<span class="parameterType">{void}</span>
										
										
											<span class="parameterType">Ape.sockServer.</span>
										
										<a name="static_event_onDisconnect">
											<span class="variableName">onDisconnect</span>
											(client)
										</a>
									</h2>
									
										<div class="description">
											Trigger a event if the client is disconnected.
										</div>
									
									
									
									
										<dl class="detailList">
											<dt class="labelHeading">Parameters:</dt>
											<div class="dline">
												
													<dd>
														<span class="parameterType">{sockClient} </span>
														<span class="variableName">client</span>
														<span class="parameterInfo">
															
																<i>Optional</i>
															
															
														</span>
														<span class="descriptionSummary">The client that has disconnected</span>
													</dd>
												
											</div>
										</dl>
									
									
										<dl class="detailList">
											<dt class="labelHeading">Returns:</dt>
											<div class="dline">
												
													<dd>
														<span class="parameterType">{void} </span>
														<span class="descriptionSummary"></span>
													</dd>
												
											</div>
										</dl>
									
									
									
									
									
									
										<dl class="detailList">
											<dt class="labelHeading">Example</dt>
											
												<dd>
													<pre class="code prettyprint linenums lang-javascript">client.onDisconnect = function() {
	Ape.log("Gone !");
}</pre>
												</dd>
											
										</dl>
									
									
										<dl class="detailList">
											<dt class="labelHeading">See:</dt>
											<div class="dline">
												
													<dd><a href="../symbols/Ape.sockClient.html">Ape.sockClient</a>
														
													</dd>
												
													<dd><a href="../symbols/Ape.sockServer.html">Ape.sockServer</a>
														
													</dd>
												
											</div>
										</dl>
									
									<hr />
									<div class="wikilink"><a href="http://www.ape-project.org/wiki/index.php?page_server:Ape.sockServer.onDisconnect" target="_blank"><img src="/assets/img/wikiape.png"/>Go to the wiki for this item</a></div>
								</div>
							
								<div class="tab-pane jsdoc-pane" id="static_event_onRead">
									<h2>
										<span class="storageClass">
											&lt;static&gt; 
										</span>
										
											<span class="parameterType">{void}</span>
										
										
											<span class="parameterType">Ape.sockServer.</span>
										
										<a name="static_event_onRead">
											<span class="variableName">onRead</span>
											(client, data)
										</a>
									</h2>
									
										<div class="description">
											Trigger a event if something is read on a serverSocket.
This function is called when a client sends data on his socket.
										</div>
									
									
									
									
										<dl class="detailList">
											<dt class="labelHeading">Parameters:</dt>
											<div class="dline">
												
													<dd>
														<span class="parameterType">{sockClient} </span>
														<span class="variableName">client</span>
														<span class="parameterInfo">
															
																<i>Optional</i>
															
															
														</span>
														<span class="descriptionSummary">The client that send the data</span>
													</dd>
												
													<dd>
														<span class="parameterType">{string} </span>
														<span class="variableName">data</span>
														<span class="parameterInfo">
															
																<i>Optional</i>
															
															
														</span>
														<span class="descriptionSummary">The data string that has been read</span>
													</dd>
												
											</div>
										</dl>
									
									
										<dl class="detailList">
											<dt class="labelHeading">Returns:</dt>
											<div class="dline">
												
													<dd>
														<span class="parameterType">{void} </span>
														<span class="descriptionSummary"></span>
													</dd>
												
											</div>
										</dl>
									
									
									
									
									
									
										<dl class="detailList">
											<dt class="labelHeading">Example</dt>
											
												<dd>
													<pre class="code prettyprint linenums lang-javascript">socket.onRead = function(client, data) {
	Ape.log('Received: ' + data);
}</pre>
												</dd>
											
										</dl>
									
									
										<dl class="detailList">
											<dt class="labelHeading">See:</dt>
											<div class="dline">
												
													<dd><a href="../symbols/Ape.sockClient.html">Ape.sockClient</a>
														
													</dd>
												
													<dd><a href="../symbols/Ape.sockServer.html">Ape.sockServer</a>
														
													</dd>
												
											</div>
										</dl>
									
									
									<div class="wikilink"><a href="http://www.ape-project.org/wiki/index.php?page_server:Ape.sockServer.onRead" target="_blank"><img src="/assets/img/wikiape.png"/>Go to the wiki for this item</a></div>
								</div>
							
						
					</div>
				
			</div>
		</div> <!-- tab content-->
	</div>
</div>